{"version":3,"sources":["components/Login/Login.js","components/Loading/Loading.js","components/Chat/SendMessageBlock/SendMessageBlock.js","components/Chat/InfoBar/InfoBar.js","components/Chat/Messages/Message/Message.js","components/Chat/Messages/Messages.js","components/Chat/Chat.js","components/AppRouter/AppRouter.js","App.js","index.js"],"names":["Login","useContext","Context","auth","firebase","login","a","provider","GoogleAuthProvider","signInWithPopup","user","console","log","className","Button","onClick","color","variant","Loading","size","CircularProgress","SendMessageBlock","isLoading","useState","isSending","messageValue","setMessageValue","firestore","useAuthState","sendMessage","collection","add","uid","displayName","photoURL","text","createdAt","FieldValue","serverTimestamp","TextField","disabled","fullWidth","onChange","event","target","value","label","multiline","rows","rowsMax","InputProps","endAdornment","InputAdornment","position","IconButton","InfoBar","name","AppBar","Toolbar","aria-label","signOut","edge","Message","isSenderUser","photo","flex","Avatar","src","Messages","messages","scrollRef","useRef","useEffect","ref","current","scrollTop","scrollHeight","elements","map","message","index","renderMessages","Chat","useCollectionData","orderBy","loading","Paper","elevation","AppRouter","path","component","exact","to","App","CssBaseline","Container","maxWidth","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","createContext","ReactDOM","render","StrictMode","Provider","document","getElementById"],"mappings":"qeAuBeA,EAlBD,WAAO,IAAD,EACSC,qBAAWC,GAA7BC,EADS,EACTA,KAAMC,EADG,EACHA,SAIPC,EAAK,uCAAG,gCAAAC,EAAA,6DACJC,EAAW,IAAIH,EAASD,KAAKK,mBADzB,SAEWL,EAAKM,gBAAgBF,GAFhC,gBAEHG,EAFG,EAEHA,KACPC,QAAQC,IAAIF,GAHF,2CAAH,qDAMX,OACI,qBAAKG,UAAU,QAAf,SACI,cAACC,EAAA,EAAD,CAAQC,QAASV,EAAOW,MAAM,UAAUC,QAAQ,YAAhD,kC,8DCNGC,G,OARC,SAAC,GAAgC,IAAD,IAA9BC,YAA8B,MAAvB,GAAuB,MAAnBN,iBAAmB,MAAR,GAAQ,EAC5C,OACI,qBAAKA,UAAS,kBAAaA,GAA3B,SACI,cAACO,EAAA,EAAD,CAAkBD,KAAMA,Q,wBCsDrBE,MApDf,YAAwC,IAAbC,EAAY,EAAZA,UAAY,EACDC,oBAAS,GADR,mBAC5BC,EAD4B,aAEKD,mBAAS,KAFd,mBAE5BE,EAF4B,KAEdC,EAFc,OAGCzB,qBAAWC,GAAxCC,EAH4B,EAG5BA,KAAMwB,EAHsB,EAGtBA,UAAWvB,EAHW,EAGXA,SAHW,EAIpBwB,YAAazB,GAArBO,EAJ4B,oBAU7BmB,EAAW,uCAAG,sBAAAvB,EAAA,sDAChBqB,EAAUG,WAAW,YAAYC,IAAI,CACjCC,IAAKtB,EAAKsB,IACVC,YAAavB,EAAKuB,YAClBC,SAAUxB,EAAKwB,SACfC,KAAMV,EACNW,UAAWhC,EAASuB,UAAUU,WAAWC,oBAE7CZ,EAAgB,IARA,2CAAH,qDAWjB,OACI,qBAAKb,UAAU,WAAf,SACI,cAAC0B,EAAA,EAAD,CACIC,SAAUlB,EACVmB,WAAS,EACTC,SApBiB,SAACC,GAC1BjB,EAAgBiB,EAAMC,OAAOC,QAoBrB1B,KAAK,QACL2B,MAAM,OACN7B,QAAQ,WACR8B,WAAS,EACTC,KAAM,EACNC,QAAS,EACTJ,MAAOpB,EACPyB,WAAY,CACRC,aACI,cAACC,EAAA,EAAD,CAAgBC,SAAS,MAAzB,SAEQ7B,EACI,cAAC,EAAD,CAASL,KAAM,KACf,cAACmC,EAAA,EAAD,CAAYd,SAAUlB,EAAWP,QAASc,EAA1C,SACI,cAAC,IAAD,CAAUb,MAAM,sB,mCCtBzCuC,G,OAtBC,SAAC,GAAY,IAAXC,EAAU,EAAVA,KACPrD,EAAQF,qBAAWC,GAAnBC,KAMP,OACI,qBAAKU,UAAU,WAAf,SACI,cAAC4C,EAAA,EAAD,CAAQJ,SAAS,WAAWrC,MAAM,UAAlC,SACI,eAAC0C,EAAA,EAAD,CAASzC,QAAQ,QAAjB,UACI,cAACqC,EAAA,EAAD,CAAYtC,MAAM,UAAU2C,aAAW,cAAc5C,QARrE,WACIZ,EAAKyD,WAQmBC,KAAK,QADjB,SAEI,cAAC,IAAD,MAEJ,6BAAKL,a,kBCFVM,EAfC,SAAC,GAAuC,IAAtC3B,EAAqC,EAArCA,KAAM4B,EAA+B,EAA/BA,aAAcP,EAAiB,EAAjBA,KAAMQ,EAAW,EAAXA,MAGlCC,EAAOF,EAAe,MAAQ,QACpC,OACI,sBAAKlD,UAAS,0BAAqBoD,GAAnC,UACI,cAACC,EAAA,EAAD,CAAQC,IAAKH,IACb,sBAAKnD,UAAS,kBAAaoD,GAA3B,WACMF,GAAgB,6BAAKP,IACvB,4BAAIrB,WCgCLiC,G,OAtCE,SAAC,GAA2B,IAA1B9C,EAAyB,EAAzBA,UAAW+C,EAAc,EAAdA,SACpBC,EAAYC,mBACXpE,EAAQF,qBAAWC,GAAnBC,KAFiC,EAGzByB,YAAazB,GAArBO,EAHiC,oBA+BxC,OA1BA8D,qBAAU,WAIV,IAAwBC,KAHLH,GAIXI,QAAQC,UAAYF,EAAIC,QAAQE,eAHrC,CAACtD,IAyBA,qBAAKT,UAAU,WAAW4D,IAAKH,EAA/B,SACKhD,EAAY,cAAC,EAAD,IApBrB,SAAwB+C,GACpB,IAAMQ,EAAWR,EAASS,KAAI,SAACC,EAASC,GACpC,OAAO,cAAC,EAAD,CAEHjB,aAAcrD,EAAKsB,MAAQ+C,EAAQ/C,IACnCG,KAAM4C,EAAQ5C,KACdqB,KAAMuB,EAAQ9C,YACd+B,MAAOe,EAAQ7C,UALZ,UACK8C,EADL,gBASX,OAAOtE,EACH,oBAAIG,UAAU,gBAAd,SACKgE,IAEL,KAK0BI,CAAeZ,O,QCXtCa,MAjBf,WAAiB,IACNvD,EAAa1B,qBAAWC,GAAxByB,UACAxB,EAAQF,qBAAWC,GAAnBC,KAFK,EAGGyB,YAAazB,GAArBO,EAHK,sBAIgByE,YACxBxD,EAAUG,WAAW,YAAYsD,QAAQ,cALjC,mBAILf,EAJK,KAIKgB,EAJL,KAQZ,OACI,eAACC,EAAA,EAAD,CAAOC,UAAW,EAAG1E,UAAU,cAA/B,UACI,cAAC,EAAD,CAAS2C,KAAM9C,EAAKuB,cACpB,cAAC,EAAD,CAAUX,UAAW+D,EAAShB,SAAUA,IACxC,cAAC,EAAD,CAAkB/C,UAAW+D,QCW1BG,EA1BG,WAAO,IACdrF,EAAQF,qBAAWC,GAAnBC,KADa,EAELyB,YAAazB,GAArBO,EAFa,oBAIpB,OACI,cAAC,IAAD,UAEQA,EAEQ,eAAC,IAAD,WACI,cAAC,IAAD,CAAO+E,KAAK,QAAQC,UAAWR,EAAMS,OAAO,IAC5C,cAAC,IAAD,CAAUC,GAAG,aAKjB,eAAC,IAAD,WACI,cAAC,IAAD,CAAOH,KAAK,SAASC,UAAW1F,EAAO2F,OAAO,IAC9C,cAAC,IAAD,CAAUC,GAAG,iBCF1BC,MAhBf,WAAgB,IACL1F,EAAQF,qBAAWC,GAAnBC,KADI,EAEoByB,YAAazB,GAFjC,mBAEEkF,GAFF,WAIX,OAJW,KAKP,sBAAKxE,UAAU,MAAf,UACI,cAACiF,EAAA,EAAD,IACA,cAACC,EAAA,EAAD,CAAWC,SAAS,KAApB,SAEQX,EAAU,cAAC,EAAD,CAASxE,UAAU,iBAAmB,cAAC,EAAD,U,QCZpET,IAAS6F,cAAc,CACnBC,OAAQ,0CACRC,WAAY,uCACZC,UAAW,uBACXC,cAAe,mCACfC,kBAAmB,eACnBC,MAAO,4CACPC,cAAe,iBAGnB,IAAMrG,EAAOC,IAASD,OAChBwB,EAAYvB,IAASuB,YAEdzB,EAAUuG,wBAAc,MAErCC,IAASC,OACP,cAAC,IAAMC,WAAP,UACI,cAAC1G,EAAQ2G,SAAT,CAAkBhE,MAAO,CAAC1C,OAAMC,aAAUuB,aAA1C,SACI,cAAC,EAAD,QAGRmF,SAASC,eAAe,W","file":"static/js/main.1f016caf.chunk.js","sourcesContent":["import React, {useContext} from 'react';\r\nimport {Button} from \"@material-ui/core\";\r\nimport \"./login.scss\"\r\nimport {Context} from \"../../index\";\r\n\r\nconst Login = () => {\r\n    const {auth, firebase} = useContext(Context)\r\n\r\n\r\n\r\n    const login = async () => {\r\n        const provider = new firebase.auth.GoogleAuthProvider()\r\n        const {user} = await auth.signInWithPopup(provider)\r\n        console.log(user)\r\n    }\r\n\r\n    return (\r\n        <div className=\"login\">\r\n            <Button onClick={login} color=\"primary\" variant=\"contained\">Login with Google</Button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Login;","import React from 'react';\r\nimport {CircularProgress} from \"@material-ui/core\";\r\nimport \"./loading.scss\"\r\n\r\nconst Loading = ({size = 40, className= \"\"}) => {\r\n    return (\r\n        <div className={`loading ${className}`}>\r\n            <CircularProgress size={size}/>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Loading;","import React, {useContext, useState} from \"react\";\r\nimport {IconButton, InputAdornment, TextField} from \"@material-ui/core\";\r\nimport Loading from \"../../Loading/Loading\";\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\nimport \"./send-message-block.scss\"\r\nimport {useAuthState} from \"react-firebase-hooks/auth\";\r\nimport {Context} from \"../../../index\";\r\n\r\n\r\nfunction SendMessageBlock({isLoading}) {\r\n    const [isSending, setIsSending] = useState(false)\r\n    const [messageValue, setMessageValue] = useState('')\r\n    const {auth, firestore, firebase} = useContext(Context)\r\n    const [user] = useAuthState(auth)\r\n\r\n    const onMessageInputChange = (event) => {\r\n        setMessageValue(event.target.value)\r\n    }\r\n\r\n    const sendMessage = async () => {\r\n        firestore.collection('messages').add({\r\n            uid: user.uid,\r\n            displayName: user.displayName,\r\n            photoURL: user.photoURL,\r\n            text: messageValue,\r\n            createdAt: firebase.firestore.FieldValue.serverTimestamp()\r\n        })\r\n        setMessageValue('')\r\n    }\r\n\r\n    return (\r\n        <div className=\"send-bar\">\r\n            <TextField\r\n                disabled={isLoading}\r\n                fullWidth\r\n                onChange={onMessageInputChange}\r\n                size=\"small\"\r\n                label=\"Send\"\r\n                variant=\"outlined\"\r\n                multiline\r\n                rows={3}\r\n                rowsMax={3}\r\n                value={messageValue}\r\n                InputProps={{\r\n                    endAdornment: (\r\n                        <InputAdornment position=\"end\">\r\n                            {\r\n                                isSending ?\r\n                                    <Loading size={20}/> :\r\n                                    <IconButton disabled={isLoading} onClick={sendMessage}>\r\n                                        <SendIcon color=\"primary\"/>\r\n                                    </IconButton>\r\n                            }\r\n                        </InputAdornment>\r\n                    )\r\n                }}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SendMessageBlock","import React, {useContext} from 'react';\r\nimport {AppBar, IconButton, Toolbar, Typography} from \"@material-ui/core\";\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\r\nimport \"./info-bar.scss\"\r\nimport {Context} from \"../../../index\";\r\n\r\nconst InfoBar = ({name}) => {\r\n    const {auth} = useContext(Context)\r\n\r\n    function logOut() {\r\n        auth.signOut()\r\n    }\r\n\r\n    return (\r\n        <div className=\"info-bar\">\r\n            <AppBar position=\"relative\" color=\"inherit\">\r\n                <Toolbar variant=\"dense\">\r\n                    <IconButton color=\"inherit\" aria-label=\"open drawer\" onClick={logOut}\r\n                                edge=\"start\">\r\n                        <ExitToAppIcon/>\r\n                    </IconButton>\r\n                    <h3>{name}</h3>\r\n                </Toolbar>\r\n            </AppBar>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default InfoBar;","import React from 'react';\r\nimport \"./message.scss\"\r\nimport {Avatar} from \"@material-ui/core\";\r\n\r\nconst Message = ({text, isSenderUser, name, photo}) => {\r\n\r\n\r\n    const flex = isSenderUser ? \"end\" : \"start\"\r\n    return (\r\n        <div className={`message-wrapper ${flex}`}>\r\n            <Avatar src={photo}/>\r\n            <div className={`message ${flex}`}>\r\n                {!isSenderUser && <h3>{name}</h3>}\r\n                <p>{text}</p>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Message;","import React, {useContext, useEffect, useRef} from 'react';\r\nimport Loading from \"../../Loading/Loading\";\r\nimport Message from \"./Message/Message\";\r\nimport \"./messages.scss\"\r\nimport {useAuthState} from \"react-firebase-hooks/auth\";\r\nimport {Context} from \"../../../index\";\r\n\r\nconst Messages = ({isLoading, messages}) => {\r\n    const scrollRef = useRef()\r\n    const {auth} = useContext(Context)\r\n    const [user] = useAuthState(auth)\r\n\r\n    useEffect(() => {\r\n        scrollToBottom(scrollRef)\r\n    }, [isLoading])\r\n\r\n    function scrollToBottom(ref) {\r\n        ref.current.scrollTop = ref.current.scrollHeight\r\n    }\r\n\r\n    function renderMessages(messages) {\r\n        const elements = messages.map((message, index) => {\r\n            return <Message\r\n                key={`${index}-message`}\r\n                isSenderUser={user.uid === message.uid}\r\n                text={message.text}\r\n                name={message.displayName}\r\n                photo={message.photoURL}\r\n            />\r\n        })\r\n\r\n        return user ? (\r\n            <ul className=\"messages-list\">\r\n                {elements}\r\n            </ul>\r\n        ) : null\r\n    }\r\n\r\n    return (\r\n        <div className=\"messages\" ref={scrollRef}>\r\n            {isLoading ? <Loading/> : renderMessages(messages)}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Messages;","import {\r\n    Paper\r\n} from \"@material-ui/core\";\r\nimport React, {useContext, useEffect, useState} from 'react'\r\nimport './chat.scss'\r\nimport SendMessageBlock from \"./SendMessageBlock/SendMessageBlock\";\r\nimport InfoBar from \"./InfoBar/InfoBar\";\r\nimport Messages from \"./Messages/Messages\";\r\nimport {useCollectionData} from \"react-firebase-hooks/firestore\";\r\nimport {Context} from \"../../index\";\r\nimport {useAuthState} from \"react-firebase-hooks/auth\";\r\n\r\nfunction Chat() {\r\n    const {firestore} = useContext(Context)\r\n    const {auth} = useContext(Context)\r\n    const [user] = useAuthState(auth)\r\n    const [messages, loading] = useCollectionData(\r\n        firestore.collection('messages').orderBy('createdAt')\r\n    )\r\n\r\n    return (\r\n        <Paper elevation={3} className=\"chat-layout\">\r\n            <InfoBar name={user.displayName}/>\r\n            <Messages isLoading={loading} messages={messages}/>\r\n            <SendMessageBlock isLoading={loading}/>\r\n        </Paper>\r\n    )\r\n}\r\n\r\nexport default Chat","import React, {useContext} from 'react';\r\nimport {Redirect, Route, Switch} from \"react-router\";\r\nimport {BrowserRouter} from \"react-router-dom\";\r\nimport Login from \"../Login/Login\";\r\nimport {useAuthState} from \"react-firebase-hooks/auth\";\r\nimport {Context} from \"../../index\";\r\nimport Chat from \"../Chat/Chat\";\r\n\r\n\r\nconst AppRouter = () => {\r\n    const {auth} = useContext(Context)\r\n    const [user] = useAuthState(auth)\r\n\r\n    return (\r\n        <BrowserRouter>\r\n            {\r\n                user ?\r\n                    (\r\n                        <Switch>\r\n                            <Route path=\"/chat\" component={Chat} exact={true}/>\r\n                            <Redirect to=\"/chat\"/>\r\n                        </Switch>\r\n                    )\r\n                    :\r\n                    (\r\n                        <Switch>\r\n                            <Route path=\"/login\" component={Login} exact={true}/>\r\n                            <Redirect to=\"/login\"/>\r\n                        </Switch>\r\n                    )\r\n            }\r\n        </BrowserRouter>\r\n    )\r\n};\r\n\r\nexport default AppRouter;","import {Container, CssBaseline} from \"@material-ui/core\";\nimport './app.scss'\nimport AppRouter from \"./components/AppRouter/AppRouter\";\nimport {useAuthState} from \"react-firebase-hooks/auth\";\nimport Loading from \"./components/Loading/Loading\";\nimport {useContext} from \"react\";\nimport {Context} from \"./index\";\n\n\nfunction App() {\n    const {auth} = useContext(Context)\n    const [user, loading, error] = useAuthState(auth)\n\n    return (\n        <div className=\"App\">\n            <CssBaseline/>\n            <Container maxWidth=\"sm\">\n                {\n                    loading ? <Loading className=\"init-loading\"/> : <AppRouter/>\n                }\n            </Container>\n        </div>\n    );\n}\n\nexport default App;\n","import React, {createContext} from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport firebase from \"firebase/compat\";\n\nfirebase.initializeApp({\n    apiKey: \"AIzaSyA4DPgby7bXx-E2KfmDTPvizN38cSMCLhA\",\n    authDomain: \"fir-react-chat-9f361.firebaseapp.com\",\n    projectId: \"fir-react-chat-9f361\",\n    storageBucket: \"fir-react-chat-9f361.appspot.com\",\n    messagingSenderId: \"665637728055\",\n    appId: \"1:665637728055:web:29eda696f4ca2a2a69b4b2\",\n    measurementId: \"G-T67S9ZXNQB\"\n})\n\nconst auth = firebase.auth()\nconst firestore = firebase.firestore()\n\nexport const Context = createContext(null)\n\nReactDOM.render(\n  <React.StrictMode>\n      <Context.Provider value={{auth, firebase, firestore}}>\n          <App/>\n      </Context.Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}